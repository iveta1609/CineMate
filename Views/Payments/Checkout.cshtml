@model CineMate.Models.Payments.PaymentCheckoutVm
@using CineMate.Models.Payments


@{
    ViewData["Title"] = $"Pay reservation #{Model.ReservationId}";
    var form = ViewBag.Form as PaymentFormVm ?? new PaymentFormVm { ReservationId = Model.ReservationId };
    string Money(decimal v) => v.ToString("0.00") + " BGN";
}

@section Styles {
    <style>
        /* --- Page hero (градиентен хедър) --- */
        .page-hero {
            border-radius: 18px;
            padding: 28px 24px;
            margin: 6px 0 18px;
            background: radial-gradient(120% 140% at 10% 10%, #1f2742 0%, #1b1f36 45%, #2a1e3f 100%);
            color: #fff;
            box-shadow: 0 10px 24px rgba(20, 22, 45, .22);
        }

            .page-hero h1 {
                margin: 0;
                font-weight: 800;
                letter-spacing: .3px;
            }

        /* дребни подсилвания */
        .card-header {
            font-weight: 600;
        }

        .form-text b {
            font-weight: 700;
        }
    </style>
}
<div class="page-hero">
    <h1>Pay reservation #@Model?.ReservationId</h1>
</div>

<div class="row g-4">
    <div class="col-lg-4">
        <div class="card shadow-sm">
            <div class="card-header fw-semibold">Summary</div>
            <div class="card-body">
                <div class="mb-2"><div class="text-muted">Movie</div><div class="fw-semibold">@Model.MovieTitle</div></div>
                <div class="mb-2"><div class="text-muted">Cinema</div><div class="fw-semibold">@Model.CinemaName</div></div>
                <div class="mb-2"><div class="text-muted">Start</div><div class="fw-semibold">@Model.StartTime.ToString("dd.MM.yyyy • HH:mm")</div></div>
                <hr />
                <div class="d-flex justify-content-between">
                    <div class="text-muted">Total</div>
                    <div class="fw-bold">@Money(Model.Amount)</div>
                </div>
            </div>
        </div>
    </div>

    <div class="col-lg-8">
        <div class="card shadow-sm">
            <div class="card-header fw-semibold">Card details</div>
            <div class="card-body">
                <form asp-controller="Payments" asp-action="Pay" method="post" novalidate>
                    @Html.AntiForgeryToken()

                    <input type="hidden" name="ReservationId" value="@form.ReservationId" />

                    <div class="mb-3">
                        <label class="form-label">Cardholder</label>
                        <input class="form-control" name="Cardholder" value="@form.Cardholder" autocomplete="cc-name" />
                    </div>

                    <div class="mb-2">
                        <label class="form-label">Card number</label>
                        <input class="form-control" name="CardNumber" inputmode="numeric" autocomplete="cc-number"
                               placeholder="16 digits (e.g. 4111 1111 1111 1111)" value="@form.CardNumber" />
                        <div class="form-text">
                            Use card number with exactly <b>16 digits</b>.
                        </div>
                    </div>


                    <div class="row g-3">
                        <div class="col-md-6">
                            <label class="form-label">Expiry</label>
                            <input class="form-control" name="Expiry" placeholder="MM/YY" autocomplete="cc-exp" value="@form.Expiry" />
                        </div>
                        <div class="col-md-6">
                            <label class="form-label">CVC</label>
                            <input class="form-control" name="Cvc" autocomplete="cc-csc" value="@form.Cvc" />
                        </div>
                    </div>

                    <div class="mt-3 d-flex gap-2">
                        <button type="submit" class="btn btn-primary">
                            Pay @Money(Model.Amount)
                        </button>
                        <a asp-controller="Reservations" asp-action="Details" asp-route-id="@Model.ReservationId"
                           class="btn btn-outline-secondary">Cancel</a>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
