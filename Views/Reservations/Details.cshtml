@model CineMate.Data.Entities.Reservation
@{
    ViewData["Title"] = $"Reservation #{Model.Id}";
    var seats = Model.ReservationSeats?
        .Where(rs => rs.Seat != null)
        .OrderBy(rs => rs.Seat.Row).ThenBy(rs => rs.Seat.Number)
        .Select(rs => $"R{rs.Seat.Row}-N{rs.Seat.Number}")
        .ToList() ?? new List<string>();
}

<h1>Reservation #@Model.Id</h1>

<div class="row mt-4">
    <div class="col-md-6">
        <h3>Screening</h3>
        <dl class="row">
            <dt class="col-sm-4">Movie</dt>
            <dd class="col-sm-8">@Model.Screening?.Movie?.Title</dd>

            <dt class="col-sm-4">Cinema</dt>
            <dd class="col-sm-8">@Model.Screening?.Cinema?.Name</dd>

            <dt class="col-sm-4">Start Time</dt>
            <dd class="col-sm-8">@Model.Screening?.StartTime.ToString("dd.M.yyyy 'г.' HH:mm")</dd>
        </dl>
    </div>

    <div class="col-md-6">
        <h3>Tickets</h3>
        <dl class="row">
            <dt class="col-sm-4">Count</dt>
            <dd class="col-sm-8">@seats.Count</dd>

            <dt class="col-sm-4">Category</dt>
            <dd class="col-sm-8">@Model.Category</dd>

            <dt class="col-sm-4">Seats</dt>
            <dd class="col-sm-8">
                @if (seats.Count == 0)
                {
                    <em>None</em>
                }
                else
                {
                    <span>@string.Join(", ", seats)</span>
                }
            </dd>

            <dt class="col-sm-4">Total Price</dt>
            <dd class="col-sm-8">@Model.TotalPrice.ToString("0.00 лв.")</dd>
        </dl>
    </div>
</div>

<a asp-action="Index" class="btn btn-secondary mt-3">Back to list</a>
